<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="tabs.css">
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <title>房态房价房型维护</title>
</head>

<body>
    <div id="roomRoot">
        
        <el-tabs tab-position="left" :width="500" @tab-click="homeStayTabs">
            <el-tab-pane v-for="item,i in homeStayData" :label="item.name">
                <el-tabs type="card" @tab-click="houseTabsClick" v-model="activeName">
                    <el-tab-pane label="房态维护">
                        <div>
                            <el-button class="el-revise-btn revise-btn" type="primary" size="small" @click="">批量修改房态</el-button>
                            <el-button class="el-revise-btn revise-btn" type="primary" size="small" @click="">批量修改房量</el-button>
                        </div>
                        <div>
                            <el-button type="primary" icon="el-icon-arrow-left" @click="deforeStateWeek">前七天</el-button>
                            <el-button type="primary">{{startHousestatedate}}-{{endHousestatedate}}</el-button>
                            <el-button type="primary" icon="el-icon-arrow-right" @click="afterStateWeek">后七天</el-button>
                        </div>
                        <div style="margin-top: 20px;">
                            <el-table :data="tableData" border style="width: 100%">
                                <el-table-column prop="date" label="房型">
                                </el-table-column>
                                <el-table-column prop="date" :label="houseStateTabTitle[0]">
                                </el-table-column>
                                <el-table-column prop="date" :label="houseStateTabTitle[1]">
                                </el-table-column>
                                <el-table-column prop="date" :label="houseStateTabTitle[2]">
                                </el-table-column>
                                <el-table-column prop="date" :label="houseStateTabTitle[3]">
                                </el-table-column>
                                <el-table-column prop="date" :label="houseStateTabTitle[4]">
                                </el-table-column>
                                <el-table-column prop="date" :label="houseStateTabTitle[5]">
                                </el-table-column>
                                <el-table-column prop="date" :label="houseStateTabTitle[6]">
                                </el-table-column>
                            </el-table>
                        </div>
                    </el-tab-pane>
                    <el-tab-pane label="房价维护">
                        <div>
                            <el-button type="primary" icon="el-icon-arrow-left" @click="deforePriceWeek">前七天</el-button>
                            <el-button type="primary">{{startHousePricedate}}-{{endHousePricedate}}</el-button>
                            <el-button type="primary" icon="el-icon-arrow-right" @click="afterPriceWeek">后七天</el-button>
                        </div>
                        <div style="margin-top: 20px;">
                            <el-table :data="tableData" border style="width: 100%">
                                <el-table-column prop="date" label="房型">
                                </el-table-column>
                                <el-table-column :label="housePriceTabTitle[0]">
                                </el-table-column>
                                <el-table-column :label="housePriceTabTitle[1]">
                                </el-table-column>
                                <el-table-column :label="housePriceTabTitle[2]">
                                </el-table-column>
                                <el-table-column :label="housePriceTabTitle[3]">
                                </el-table-column>
                                <el-table-column :label="housePriceTabTitle[4]">
                                </el-table-column>
                                <el-table-column :label="housePriceTabTitle[5]">
                                </el-table-column>
                                <el-table-column :label="housePriceTabTitle[6]">
                                </el-table-column>
                            </el-table>
                        </div>
                    </el-tab-pane>
                
                    <el-tab-pane label="房型维护" name="frist">
                        <el-row>
                            <el-button class="el-revise-btn revise-btn" type="primary" size="small" @click="addHouseBtn">创建房型</el-button>
                        </el-row>
                        <el-form :inline="true" class="demo-form-inline">
                            <el-form-item label="房间名称">
                                <el-input v-model="houseName" placeholder="房间名称"></el-input>
                            </el-form-item>
                            <el-form-item>
                                <el-button type="primary" @click="houseSreachBtn" class="el-revise-btn revise-btn" size="small">查询
                                </el-button>
                            </el-form-item>
                        </el-form>
                        <el-table :data="houseData" border style="width: 100%" @cell-click="houseTableCell">
                            <el-table-column prop='id' label="房型ID">
                            </el-table-column>
                            <el-table-column prop='name' label="房型名称">
                            </el-table-column>
                            <el-table-column prop='size' label="面积">
                            </el-table-column>
                            <el-table-column prop='bed_info' label="床量">
                            </el-table-column>
                            <el-table-column prop='window' label="窗户">
                            </el-table-column>
                            <el-table-column prop='number' label="可入住人数">
                            </el-table-column>
                            <el-table-column prop='sort' label="排序">
                            </el-table-column>
                            <el-table-column label="操作">
                                <el-button type="primary" icon="el-icon-edit" circle size="mini" @click="setReviseHouseTypeBtn"></el-button>
                                <el-button type="danger" icon="el-icon-delete" circle size="mini" @click="setDeleHouseTypeBtn"></el-button>
                            </el-table-column>
                        </el-table>
                        <div id="footer-page-box">
                            <el-pagination
                                @size-change="handleSizeChange"
                                @current-change="handleCurrentChange"
                                :current-page="currentPage"
                                :page-sizes="[5, 10, 20, 50]"
                                :page-size="100"
                                layout="total, sizes, prev, pager, next, jumper"
                                :total="allTotal">
                            </el-pagination>
                        </div>
                        
                    </el-tab-pane>
                </el-tabs>
            </el-tab-pane>
        </el-tabs>

        <div class="addHouseType" v-if="addBoxShow">
            <i class="el-icon-close" @click="closeAddBoxClick"></i>
            <h2>基础信息</h2>
            <label for="">房型名称</label>
            <el-input class="addHouseTypeInp" placeholder="请输入内容" v-model="addHouseTypeName">
                <!-- <template slot="prepend">房型名称</template> -->
            </el-input>
            <label for="">面积</label>
            <el-input class="addHouseTypeInp" placeholder="请输入内容" v-model="addHouseTypeSize">
                <!-- <template slot="prepend">面积</template> -->
                <template slot="append">平方米</template>
            </el-input>
            <div class="seleLabel">
                <label for="">几室</label>
            </div>
            <el-select class="addHouseTypeInp" v-model="addHouseSeveral_rooms" placeholder="几室">
                <el-option v-for="item in several_roomsOptions" :key="item.value" :label="item.label" :value="item.value">
                </el-option>
            </el-select>
            <div></div>
            <div v-for="addHouseBed_infoItem, i in addHouseBed_info">
                <div class="seleLabel">
                    <label for="">床型{{i+1}}</label>
                </div>
                <el-select class="addHouseTypeInp" v-model="addHouseBed_infoItem.name" placeholder="床型">
                    <el-option v-for="item in bed_infoNameOptions" :key="item.value" :label="item.label" :value="item.value">
                    </el-option>
                </el-select>
                <div class="seleLabel">
                    <label for="">床宽</label>
                </div>
                <el-select class="addHouseTypeInp" v-model="addHouseBed_infoItem.size" placeholder="床宽">
                    <el-option v-for="item in bed_infoSizeOptions" :key="item.value" :label="item.label" :value="item.value">
                    </el-option>
                </el-select>
            </div>
            <div>
                <el-button type="primary" plain :width="500" @click="addBed"> + 床型</el-button>
            </div>
            <div>
                <div class="seleLabel">
                    <label for="">可入住人数</label>
                </div>
                <el-select class="addHouseTypeInp" v-model="addHouseNumber" placeholder="请选择">
                    <el-option v-for="item in numberOptions" :key="item.value" :label="item.label" :value="item.value">
                    </el-option>
                </el-select>
            </div>
            <div>
                <div class="seleLabel">
                    <label for="">窗户</label>
                </div>
                <el-select class="addHouseTypeInp" v-model="addHouseWindow" placeholder="请选择">
                    <el-option v-for="item in windowOptions" :key="item.value" :label="item.label" :value="item.value">
                    </el-option>
                </el-select>
            </div>
            <div>
                <div class="seleLabel">
                    <label for="">早餐</label>
                </div>
                <el-select class="addHouseTypeInp" v-model="addHousebreakfast" placeholder="请选择">
                    <el-option v-for="item in breakfastOptions" :key="item.value" :label="item.label" :value="item.value">
                    </el-option>
                </el-select>
            </div>
            <div>
                <div class="seleLabel">
                    <label for="">卫生间</label>
                </div>
                <el-select class="addHouseTypeInp" v-model="addHouseWc" placeholder="请选择">
                    <el-option v-for="item in wcOptions" :key="item.value" :label="item.label" :value="item.value">
                    </el-option>
                </el-select>
            </div>
            <div class="smallInput">
                <label for="">房量</label>
                <el-input class="addHouseTypeInp" placeholder="请输入内容" v-model="addHouseVolume">
                    <!-- <template slot="prepend">面积</template> -->
                    <template slot="append">间</template>
                </el-input>
            </div>
            

            <h2>客房设置</h2>
            <div v-for="checkItem in addHouseCheckList">
                <h4>{{checkItem.title}}</h4>
                <div class="check-box">
                    <el-checkbox-group v-model="addHouseInfoList">
                        <el-checkbox v-for="check in checkItem.content" :label="check.name"></el-checkbox>
                    </el-checkbox-group>
                </div>
            </div>

            <h2>房屋详情</h2>
            <h4>房屋详情</h4>
            <div>
                <el-input
                    type="textarea"
                    :rows="5"
                    placeholder="请输入内容"
                    v-model="addHouseTestera" 
                    maxlength="50">
                </el-input>
            </div>
            <div>
                <span>加床服务</span>
                <el-radio-group v-model="addHouseExtra_bed">
                    <el-radio :label="1">不可加床</el-radio>
                    <el-radio :label="2">无偿加床</el-radio>
                    <el-radio :label="3">有偿加床</el-radio>
                </el-radio-group>
                <div class="smallerInput">
                    <el-input class="addHouseTypeInp" placeholder="请输入内容" v-model="addHouseExtra_bed_money">
                        <!-- <template slot="prepend">面积</template> -->
                        <template slot="append">元/人</template>
                    </el-input>
                </div>
            </div>
            <h4>图片</h4>
            <!-- 新建 -->
            <div v-if="currentAddbox" class="upLoadBigBox">
                <div class="upLoadSmallBox">
                    <el-upload action="https://api.sdzhujialin.com/admin/Index/IndexData" list-type="picture-card" :on-change="onUpload"
                        :limit="10" accept="image/*">
                        <i class="el-icon-plus"></i>
                    </el-upload>
                    <el-button type="primary" plain v-for="imgItem, i in addHouseList" class="add-uploadimgbtn" @click="uploadIsMain(i)" size="mini">
                        {{homeImgNum == i?'主页':'设为主页'}}</el-button>
                </div>
            </div>
            <!-- 详情 -->
            <div v-if="!currentAddbox" class="upLoadBigBox">
                <div class="upLoadSmallBox">
                    <el-upload 
                    action="https://api.sdzhujialin.com/admin/Index/IndexData" 
                    list-type="picture-card" 
                    :on-change="onReviseUpload" 
                    :limit="10" 
                    accept="image/*" 
                    :file-list="mounteImgArr"
                    >
                        <i class="el-icon-plus"></i>
                    </el-upload>
                    <el-button type="primary" plain v-for="imgItem, i in addHouseList" class="add-uploadimgbtn"
                        @click="uploadReviseIsMain(i)" size="mini">
                        {{homeImgNum == i?'主页':'设为主页'}}</el-button>
                </div>
            </div>

            <h4>能否做饭</h4>
            <el-radio-group v-model="addHouseIs_cook">
                <el-radio :label="1">能</el-radio>
                <el-radio :label="2">不能</el-radio>
            </el-radio-group>
            
            <h2>入住须知</h2>
            <h4>入住时间</h4>
            <el-radio-group v-model="addHouseGo_time">
                <el-radio label="12:00">离店日当天12：00以后</el-radio>
                <el-radio :label="2">入住日当天</el-radio>
                <div class="smallerInput">
                    <el-time-select v-model="addHouseGo_timeText" :picker-options="{
                                        start: '00:00',
                                        step: '01:00',
                                        end: '23:59',
                                    }">
                    </el-time-select>以后
                </div>
            </el-radio-group>
            <h4>退房时间</h4>
            <el-radio-group v-model="addHouseOut_time">
                <el-radio label="12:00">离店日当天12：00以后</el-radio>
                <el-radio :label="2">离店日当天</el-radio>
                <div class="smallerInput">
                    <el-time-select v-model="addHouseOut_timeText" :picker-options="{
                                        start: '00:00',
                                        step: '01:00',
                                        end: '23:59',
                                    }">
                    </el-time-select>以后
                </div>
            </el-radio-group>
            <h4>接待时间</h4>
            <el-time-select placeholder="起始时间" v-model="addHouseStartTime" :picker-options="{
                    start: '00:00',
                    step: '01:00',
                    end: '23:59',
                }">
            </el-time-select>
            <el-time-select placeholder="结束时间" v-model="addHouseEndTime" :picker-options="{
                  start: '00:00',
                  step: '01:00',
                  end: '23:59',
                  minTime: addHouseStartTime
                }">
            </el-time-select>
            <h4>发票</h4>
            <el-radio-group v-model="addHouseInvoice">
                <el-radio :label="1">可开发票</el-radio>
                <el-radio :label="2">不可开发票</el-radio>
            </el-radio-group>
            <h4>押金</h4>
            <el-radio-group v-model="addHouseDeposit">
                <el-radio :label="0">无需押金</el-radio>
                <el-radio :label="2">需</el-radio>
                <div class="smallerInput">
                    <el-input class="addHouseTypeInp" placeholder="请输入内容" v-model="addHouseDeposit_money">
                            <template slot="append">元</template>
                    </el-input>
                </div>
            </el-radio-group>
            <h4>房屋守则</h4>
            <div class="footer-check-box">
                <el-checkbox-group v-model="addHouseHousing_code">
                    <el-checkbox label="接待儿童"></el-checkbox>
                    <el-checkbox label="接待老人"></el-checkbox>
                    <el-checkbox label="抽烟"></el-checkbox>
                    <el-checkbox label="带宠物"></el-checkbox>
                    <el-checkbox label="商业拍摄"></el-checkbox>
                    <el-checkbox label="聚会"></el-checkbox>
                    <el-checkbox label="额外加人"></el-checkbox>
                    <el-checkbox label="接待外宾"></el-checkbox>
                </el-checkbox-group>
            </div>
            <h4>儿童入住</h4>
            <p>不接受18岁以下未成年人在没有监护人陪同下入住</p>
            <h4>退订政策</h4>
            <p>入住日18：00点之前可以免费取消，超过18:00则需要收取全部房费作为违约金支付给房东</p>
            <!-- 修改 -->
            <div v-if="currentAddbox" class="addBoxFooter">
                <el-button type="info" size="small" @click="closeAddBoxClick">取消</el-button>
                <el-button type="primary" size="small" @click="UploadHouseInfo">提交</el-button>
            </div>
            <!-- 详情 -->
            <div v-if="!currentAddbox" class="addBoxFooter">
                <el-button type="info" size="small" @click="closeAddBoxClick">取消</el-button>
                <el-button type="primary" size="small" @click="ReviseHouseTypeInfoBtn">提交</el-button>
            </div>
        
        
        
        </div>

        <div v-if="reviseStateFrame" id="revise-state">
            <i class="el-icon-close" @click="closeReviseStateClick"></i>
            <h4 class="revise-state-title">批量修改房态</h4>
            <p>房型:</p>
            <div id="revise-state-name">
                <div v-for="n in 10">
                    <el-checkbox>备选项</el-checkbox>
                </div>
            </div>
            <div>
                <span>房态设置</span>
                <el-button class="el-revise-btn revise-btn" type="primary" size="small">开房</el-button>
                <el-button class="el-revise-btn revise-btn" type="primary" size="small">关房</el-button>
            </div>
            <div>
                <span>修改日期</span>
                <el-date-picker v-model="roomStateValue" type="daterange" start-placeholder="开始日期"
                    end-placeholder="结束日期" :default-time="['00:00:00', '23:59:59']" size="mini">
                </el-date-picker>
                <p>可修改60天房态</p>
                <el-checkbox :indeterminate="isIndeterminate" v-model="checkAll" @change="handleCheckAllChange">全选
                </el-checkbox>
                <div style="margin: 15px 0;"></div>
                <el-checkbox-group v-model="checkedCities" @change="handleCheckedCitiesChange">
                    <el-checkbox v-for="day,i in week" :label="day" :key="i">{{day}}</el-checkbox>
                </el-checkbox-group>
                <el-row class="revise-bot-btn">
                    <el-button type="primary" size="small" @click="roomStateOpen">确认</el-button>
                    <el-button type="warning" size="small" @click="roomStateClose">取消</el-button>
                </el-row>
            </div>
        </div>
        <div v-if="reviseNumFrame" id="revise-number">
            <i class="el-icon-close" @click="closeReviseNumClick"></i>
            <h4 class="revise-state-title">批量修改房量</h4>
            <p>房型</p>
            <div id="revise-number-name">
                <div v-for="n in tableData">
                    <el-checkbox>备选项</el-checkbox>
                    <el-input v-model="n.value" size="mini" placeholder="请输入" clearable
                        style="display: inline-block;width: 80px;">
                    </el-input>间
                </div>

            </div>
            <div>
                <span>修改日期</span>

                <el-date-picker v-model="roomNumValue" type="daterange" start-placeholder="开始日期" end-placeholder="结束日期"
                    :default-time="['00:00:00', '23:59:59']" size="mini">
                </el-date-picker>
                <p>可修改60天房态</p>
                <el-checkbox :indeterminate="isIndeterminate" v-model="checkAll" @change="handleCheckAllChange">全选
                </el-checkbox>
                <div style="margin: 15px 0;"></div>
                <el-checkbox-group v-model="checkedCities" @change="handleCheckedCitiesChange">
                    <el-checkbox v-for="day,i in week" :label="day" :key="i">{{day}}</el-checkbox>
                    </el-chFeckbox-group>
                    <el-row class="revise-bot-btn">
                        <el-button type="primary" size="small" @click="roomNumOpen">确认</el-button>
                        <el-button type="warning" size="small" @click="roomNumClose">取消</el-button>
                    </el-row>
            </div>
        </div>
    </div>


    <script>
        // 左侧民宿列表
        const queryHomeStayListURL = 'https://api.sdzhujialin.com/admin/Homestay/IndexData'
        // 房型列表
        const houseTypeListURL = 'https://api.sdzhujialin.com/admin/House/IndexData';
        // 房型设施
        const queryHouseCheckListURL = 'https://api.sdzhujialin.com/admin/Homestay/HouseData';
        // 添加房型信息(除图)
        const setAddhouseTypeInfoURL = 'https://api.sdzhujialin.com/admin/House/AddData';
        // 添加房型图片
        const setAddHouseTypeImgURL = 'https://api.sdzhujialin.com/admin/House/upload';
        // 删除房型
        const setDeleHouseTypeUrl = 'https://api.sdzhujialin.com/admin/House/DelData';
        // 房型详情
        const queryHouseTypeAllURL = 'https://api.sdzhujialin.com/admin/House/Details';
        // 详情设为主图
        const setReviseHouseTypeIsMainImgURL = 'https://api.sdzhujialin.com/admin/House/ImgOne';
        // 修改房型请求
        const setReviseHouseTypeInfoURL = 'https://api.sdzhujialin.com/admin/House/Updata';

        var temp = new Date();
        new Vue({
            el: "#roomRoot",
            data: {
                // 优先显示页
                activeName: 'frist',
                // ----------------- 房型----------------
                // 分页当前页
                currentPage: 1,
                // 总条数
                allTotal: 0,
                // 房名
                houseName: '',
                // 民宿列表数据
                homeStayData: [],
                // 首个民宿ID
                activeHomeStayID: '',
                // 当前民宿名
                currentHomeStayID: '',
                // 房型列表数据
                houseData: [],
                // DeleID
                deleHouseID: '',

                // --------------- 新建房型 ---------------
                // addShow
                addBoxShow: false,
                // 当前弹窗状态
                currentAddbox: true,
                // change次数
                uploadNum: 0,
                // 绑定房型名称
                addHouseTypeName: '',
                // 绑定面积
                addHouseTypeSize: '',
                // 几室选项
                several_roomsOptions: [
                    {
                        value: '1',
                        label: '1'
                    }, {
                        value: '2',
                        label: '2'
                    }, {
                        value: '3',
                        label: '3'
                    }, {
                        value: '4',
                        label: '4'
                    }, {
                        value: '5',
                        label: '5'
                    }, {
                        value: '6',
                        label: '6'
                    }, {
                        value: '7',
                        label: '7'
                    }, {
                        value: '8',
                        label: '8'
                    }, {
                        value: '9',
                        label: '9'
                    }, {
                        value: '10',
                        label: '10'
                    }, {
                        value: '11',
                        label: '11'
                    }, {
                        value: '12',
                        label: '12'
                    }, {
                        value: '13',
                        label: '13'
                    }, {
                        value: '14',
                        label: '14'
                    }, {
                        value: '15',
                        label: '15'
                    }, {
                        value: '15+',
                        label: '15+'
                    }
                ],
                // 绑定几室 
                addHouseSeveral_rooms: '',
                // 床型选项
                bed_infoNameOptions: [
                    {
                        value: '单人床',
                        label: '单人床'
                    }, {
                        value: '大床',
                        label: '大床'
                    }, {
                        value: '圆床',
                        label: '圆床'
                    }, {
                        value: '水床',
                        label: '水床'
                    }, {
                        value: '上下铺',
                        label: '上下铺'
                    }, {
                        value: '榻榻米',
                        label: '榻榻米'
                    }, {
                        value: '沙发床',
                        label: '沙发床'
                    }, {
                        value: '炕',
                        label: '炕'
                    }, {
                        value: '胶囊床',
                        label: '胶囊床'
                    }, {
                        value: '儿童床',
                        label: '儿童床'
                    }, {
                        value: '高低床',
                        label: '高低床'
                    }, {
                        value: '帐篷床',
                        label: '帐篷床'
                    }, {
                        value: '其他',
                        label: '其他'
                    }
                ],
                // 床宽选项
                bed_infoSizeOptions: [
                    {
                        value: '1.1米',
                        label: '1.1米'
                    }, {
                        value: '1.2米',
                        label: '1.2米'
                    }, {
                        value: '1.3米',
                        label: '1.3米'
                    }, {
                        value: '1.35米',
                        label: '1.35米'
                    }, {
                        value: '1.5米',
                        label: '1.5米'
                    }, {
                        value: '1.8米',
                        label: '1.8米'
                    }, {
                        value: '2米',
                        label: '2米'
                    }, {
                        value: '其他',
                        label: '其他'
                    }
                ],
                // 绑定床信息
                addHouseBed_info: [
                    {
                        name: '',
                        size: ''
                    }
                ],
                // 可住人数选项(1-15+)
                numberOptions:[
                    {
                        value: '1',
                        label: '1'
                    }, {
                        value: '2',
                        label: '2'
                    }, {
                        value: '3',
                        label: '3'
                    }, {
                        value: '4',
                        label: '4'
                    }, {
                        value: '5',
                        label: '5'
                    }, {
                        value: '6',
                        label: '6'
                    }, {
                        value: '7',
                        label: '7'
                    }, {
                        value: '8',
                        label: '8'
                    }, {
                        value: '9',
                        label: '9'
                    }, {
                        value: '10',
                        label: '10'
                    }, {
                        value: '11',
                        label: '11'
                    }, {
                        value: '12',
                        label: '12'
                    }, {
                        value: '13',
                        label: '13'
                    }, {
                        value: '14',
                        label: '14'
                    }, {
                        value: '15',
                        label: '15'
                    }, {
                        value: '15+',
                        label: '15+'
                    }
                ],
                // 绑定可住人数
                addHouseNumber: '',
                // 窗户选项(有窗1无窗2)
                windowOptions:[
                    {
                        value: '1',
                        label: '有窗'
                    },{
                        value: '2',
                        label: '无窗'
                    }
                ],
                // 绑定有无窗
                addHouseWindow: '',
                // 早餐选项(不含早餐1含早餐2)
                breakfastOptions:[
                    {
                        value: '1',
                        label: '不含早餐'
                    },{
                        value: '2',
                        label: '含早餐'
                    }
                ],
                // 绑定早餐
                addHousebreakfast: '',
                // 卫生间选项(12345)
                wcOptions:[
                    {
                        value: '1',
                        label: '1'
                    },{
                        value: '2',
                        label: '2'
                    },{
                        value: '3',
                        label: '3'
                    },{
                        value: '4',
                        label: '4'
                    },{
                        value: '5',
                        label: '5'
                    }
                ],
                // 绑定卫生间
                addHouseWc: '',
                // 绑定房量
                addHouseVolume: '',

                // 房型设施
                addHouseCheckList: [],
                // 房型设置绑定
                addHouseInfoList: [],
                // 房间设施
                addHouseRoom_facilities: [],
                // 基础设施
                addHouseInfrastructure: [],
                // 通信设施
                addHouseCommunication: [],
                // 浴室设施
                addHouseBathroom: [],
                // 食品
                addHouseFood: [],
                
                //房屋详情输入
                addHouseTestera: '', 
                // 加床服务(123)
                addHouseExtra_bed: '',
                // 有偿加床
                addHouseExtra_bed_money: 0,
                // 图片上传
                addHouseList: [],
                // 图片主页索引
                homeImgNum: 0,
                // 能否做饭(12)
                addHouseIs_cook: '',

                // 入住时间
                addHouseGo_time: '',
                addHouseGo_timeText: '',
                // 离店时间
                addHouseOut_time: '',
                addHouseOut_timeText: '',
                // 接待起始时间
                addHouseStartTime: '',
                // 接待结束时间
                addHouseEndTime: '',
                // 发票
                addHouseInvoice: '',
                // 押金
                addHouseDeposit: '',
                // 押金钱
                addHouseDeposit_money: '',
                // 房屋守则
                addHouseHousing_code: [],

                // ---------------- 房型详情 -----------------
                // 房型详情数据
                resiveHouseInfoData: {},
                // 图片回显
                mounteImgArr: [],

                // --------------房态----------------
                tableData: [
                    {
                        date: '房型名称房型名称'
                    }, {
                        date: '房型名称房型名称'
                    }, {
                        date: '房型名称房型名称'
                    }, {
                        date: '房型名称房型名称'
                    }
                ],
                // 房态日期
                houseStateTabTitle:[],
                startHousestatedate: '' ,
                endHousestatedate: '',
                stateDateNum: 0,
                stateYear: '',
                stateMonth: '',
                stateDate: '',
                stateDay: '',

                // 房价日期
                housePriceTabTitle:[],
                startHousePricedate: '' ,
                endHousePricedate: '',
                priceDateNum: 0,
                priceYear: '',
                priceMonth: '',
                priceDate: '',
                priceDay: '',




                // checkAll: false,
                // reviseNumber: '',
                reviseStateFrame: false,
                reviseNumFrame: false,
                // roomStateStartValue: '',

                // roomNumValue: '',
                // roomStateValue: '',
            },
            mounted() {
                // 左侧民宿列表
                this.queryHomeStayList();
                // 房态日期
                this.houseStateDate();
                // 房价日期
                this.housePriceDate();
            },
            methods: {
                // 民宿列表选项卡
                homeStayTabs(tab, event){
                    // console.log(tab.label);
                    for(let i = 0; i < this.homeStayData.length; i++){
                        if(tab.label == this.homeStayData[i].name){
                            this.currentHomeStayID = this.homeStayData[i].id
                        }
                    }
                    this.addBoxShow = false;
                    this.HouseTypeList();

                },
                // 房型选项卡
                houseTabsClick(tab, event) {
                    console.log(tab.label);
                    this.addBoxShow = false;
                },
                // 房型列表分页
                handleSizeChange(val) {
                    console.log(val);
                },
                handleCurrentChange(val) {
                    console.log(val);
                },

                // 房型查询按钮
                houseSreachBtn() {
                    this.houseTypeNameSreach();
                },
                // 新建房型按钮
                addHouseBtn(){
                    this.addBoxShow = !this.addBoxShow;
                    this.currentAddbox = true;
                    this.queryHouseCheckList();
                },
                // 加床按钮
                addBed(){
                    let tempObj = {
                        name: '',
                        size: ''
                    }
                    this.addHouseBed_info.push(tempObj);
                },
                // 表格点击
                houseTableCell(row, column, cell, event){
                    // console.log(row.id);
                    this.deleHouseID = row.id;
                },
                // 删除房型按钮
                setDeleHouseTypeBtn(){
                    // console.log('删除按钮dianji');
                    setTimeout(() => {
                        this.setDeleHouseType();
                    }, 60);
                },
                // 房型修改详情按钮
                setReviseHouseTypeBtn(){
                    this.currentAddbox = false;
                    this.addBoxShow = !this.addBoxShow;
                    setTimeout(() => {
                        this.queryHouseTypeAll();
                    }, 60);
                },
                // 取消关闭add
                closeAddBoxClick(){
                    this.addBoxShow = false;
                },
                // 弹出层右上角关闭
                closeAddBoxClick(){
                    this.addBoxShow = false;
                },
                // add确认
                UploadHouseInfo() {
                    
                    for (let i = 0; i < this.addHouseCheckList.length; i++) {
                        let arr = [];
                        for (let j = 0; j < this.addHouseCheckList[i].content.length; j++) {
                            for (let m = 0; m < this.addHouseInfoList.length; m++) {
                                if (this.addHouseInfoList[m] == this.addHouseCheckList[i].content[j].name) {
                                    arr.push(this.addHouseCheckList[i].content[j].id.toString());
                                }
                            }
                        }
                        if (this.addHouseCheckList[i].title == "基础设施") {
                            this.addHouseInfrastructure = arr;
                        } else if (this.addHouseCheckList[i].title == "房间设施") {
                            this.addHouseRoom_facilities = arr;
                        } else if (this.addHouseCheckList[i].title == "通讯娱乐") {
                            this.addHouseCommunication = arr;
                        } else if (this.addHouseCheckList[i].title == "浴室设备") {
                            this.addHouseBathroom = arr;
                        } else if (this.addHouseCheckList[i].title == "食品/饮品"){
                            this.addHouseFood = arr;
                        }
                    }
                    for(let i = 0; i < this.addHouseHousing_code.length; i++){
                        if(this.addHouseHousing_code[i] == '接待儿童'){
                            this.addHouseHousing_code[i] = 1;
                        } else if(this.addHouseHousing_code[i] == '接待老人'){
                            this.addHouseHousing_code[i] = 2;
                        } else if(this.addHouseHousing_code[i] == '抽烟'){
                            this.addHouseHousing_code[i] = 3;
                        } else if(this.addHouseHousing_code[i] == '带宠物'){
                            this.addHouseHousing_code[i] = 4;
                        } else if(this.addHouseHousing_code[i] == '商业拍摄'){
                            this.addHouseHousing_code[i] = 5;
                        } else if(this.addHouseHousing_code[i] == '聚会'){
                            this.addHouseHousing_code[i] = 6;
                        } else if(this.addHouseHousing_code[i] == '额外加人'){
                            this.addHouseHousing_code[i] = 7;
                        } else if(this.addHouseHousing_code[i] == '接待外宾'){
                            this.addHouseHousing_code[i] = 8;
                        }
                    }
                    if(this.addHouseGo_time == 2){
                        this.addHouseGo_time = this.addHouseGo_timeText;
                    }
                    if(this.addHouseOut_time == 2){
                        this.addHouseOut_time = this.addHouseOut_timeText;
                    }
                    if(this.addHouseDeposit == 2){
                        this.addHouseDeposit = this.addHouseDeposit_money;
                    }
                    if(this.addHouseExtra_bed == 3){
                        this.addHouseExtra_bed = this.addHouseExtra_bed_money;
                    }
                    
                    if(!this.addHouseTypeName || !this.addHouseTypeSize || !this.addHouseSeveral_rooms || !this.addHouseBed_info[0].name ||!this.addHouseBed_info[0].size || !this.addHouseNumber || !this.addHouseWindow || !this.addHousebreakfast || !this.addHouseWc || !this.addHouseVolume || !this.addHouseTestera || !this.addHouseList || !this.addHouseIs_cook || !this.addHouseGo_time || !this.addHouseOut_time || !this.addHouseStartTime || !this.addHouseEndTime || !this.addHouseInvoice || !this.addHouseHousing_code ){
                        this.failTip("信息填写不完整");
                    } else {
                        this.setAddhouseTypeInfo();
                    }
                },

                // 新建图片上传change
                onUpload(file, fileList){
                    this.uploadNum++;
                    if (this.uploadNum == 2) {
                        this.addHouseList = fileList;
                    }
                },
                // 详情图片删除上传change
                onReviseUpload(file, fileList){
                    this.uploadNum++;
                    if (this.uploadNum == 2) {
                        this.addHouseList = fileList;
                    }
                },
                // 新建设为主图按钮
                uploadIsMain(i){
                    this.homeImgNum = i;
                },
                // 详情设为主图 setReviseHouseTypeIsMainImg
                uploadReviseIsMain(i){
                    this.homeImgNum = i;
                    this.setReviseHouseTypeIsMainImg();
                },
                // 修改房型确认按钮
                ReviseHouseTypeInfoBtn(){
                    this.setReviseHouseTypeInfo();
                },



                // 房态前七天 
                deforeStateWeek(){
                    this.stateDateNum--;
                    this.houseStateDate();
                },
                // 房态后七天
                afterStateWeek(){
                    console.log(this.stateDateNum)
                    this.stateDateNum++;
                    if(this.stateDateNum < 5){
                        this.houseStateDate();
                    } else {
                        this.stateDateNum = 4;
                        this.failTip("最多查看两月信息");
                    }
                },
                // 房态日期
                houseStateDate(){
                    let startdate = new Date();
                    let enddate = new Date();
                    startdate.setDate(startdate.getDate() + this.stateDateNum*7);
                    enddate.setDate(enddate.getDate() + 6 + this.stateDateNum*7);
                    this.stateYear = startdate.getFullYear();
                    this.stateMonth = startdate.getMonth() + 1;
                    this.stateDate = startdate.getDate();
                    this.startHousestatedate = this.stateYear + '/' + this.stateMonth + '/' + this.stateDate;
                    this.stateYear = enddate.getFullYear();
                    this.stateMonth = enddate.getMonth() + 1;
                    this.stateDate = enddate.getDate();
                    this.endHousestatedate = this.stateYear + '/' + this.stateMonth + '/' + this.stateDate;
                    this.houseStateTabTitle = [];
                    let str = '';
                    for(let i = 0; i < 7; i++){
                        if(i == 0){
                            startdate.setDate(startdate.getDate());
                            str = (startdate.getMonth()+1) + '.' +startdate.getDate();
                            this.houseStateTabTitle.push(str);
                        } else {
                            startdate.setDate(startdate.getDate() + 1);
                            str = (startdate.getMonth()+1) + '.' +startdate.getDate();
                            this.houseStateTabTitle.push(str);
                        }
                        
                    }
                    
                },


                // 房价前七天 
                deforePriceWeek() {
                    this.priceDateNum--;
                    this.housePriceDate();
                },
                // 房价后七天
                afterPriceWeek() {
                    console.log(this.priceDateNum)
                    this.priceDateNum++;
                    if(this.priceDateNum < 5){
                        this.housePriceDate();
                    } else {
                        this.priceDateNum = 4;
                        this.failTip("最多查看两月信息");
                    }
                },
                // 房价日期
                housePriceDate(){
                    let startdate = new Date();
                    let enddate = new Date();
                    startdate.setDate(startdate.getDate() + this.priceDateNum*7);
                    enddate.setDate(enddate.getDate() + 6 + this.priceDateNum*7);
                    this.priceYear = startdate.getFullYear();
                    this.priceMonth = startdate.getMonth() + 1;
                    this.priceDate = startdate.getDate();
                    this.startHousePricedate = this.priceYear + '/' + this.priceMonth + '/' + this.priceDate;
                    this.priceYear = enddate.getFullYear();
                    this.priceMonth = enddate.getMonth() + 1;
                    this.priceDate = enddate.getDate();
                    this.endHousePricedate = this.priceYear + '/' + this.priceMonth + '/' + this.priceDate;
                    this.housePriceTabTitle = [];
                    let str = '';
                    for(let i = 0; i < 7; i++){
                        if(i == 0){
                            startdate.setDate(startdate.getDate());
                            str = (startdate.getMonth()+1) + '.' +startdate.getDate();
                            this.housePriceTabTitle.push(str);
                        } else {
                            startdate.setDate(startdate.getDate() + 1);
                            str = (startdate.getMonth()+1) + '.' +startdate.getDate();
                            this.housePriceTabTitle.push(str);
                        }
                        
                    }
                },

                
                // 左侧民宿列表请求
                queryHomeStayList(){
                    let that = this;
                    $.ajax({
                        url: queryHomeStayListURL,
                        type: 'POST',
                        dataType: 'json',
                        success(res){
                            // console.log(res);
                            if(res.code == 200){
                                that.homeStayData = res.data;
                                that.activeHomeStayID = res.data[0].id;
                                that.activeHouseTypeList();
                            } else{
                                that.failTip(res.msg);
                            }
                        }
                    })
                },
                // 首次民宿房型请求
                activeHouseTypeList(){
                    let that = this;
                    $.ajax({
                        url: houseTypeListURL,
                        type: 'POST',
                        data:{
                            homestay_id: this.activeHomeStayID
                        },
                        dataType: 'json',
                        success(res){
                            if(res.code == 200){
                                that.houseData = res.data.data;
                                that.allTotal = res.data.total;
                                that.currentHomeStayID = that.activeHomeStayID;
                            } else {
                                that.failTip(res.msg);
                            }
                        }
                    })
                },
                // 民宿tab切换房型请求
                HouseTypeList(){
                    let that = this;
                    $.ajax({
                        url: houseTypeListURL,
                        type: 'POST',
                        dataType: 'json',
                        data: {
                            homestay_id: this.currentHomeStayID
                        },
                        success(res){
                            // console.log(res);
                            if(res.code == 200){
                                that.houseData = res.data.data;
                                that.allTotal = res.data.total;
                                this.addBoxShow = false;
                            }
                            
                        }
                    })
                },
                // 房型查询请求
                houseTypeNameSreach(){
                    let that = this;
                    $.ajax({
                        url: houseTypeListURL,
                        type: 'POST',
                        dataType: 'json',
                        data: {
                            name: this.houseName,
                            homestay_id: this.currentHomeStayID
                        },
                        success(res){
                            if(res.code == 200){
                                that.houseData = res.data.data;
                                that.allTotal = res.data.total;
                            } else {
                                that.failTip(res.msg);
                            }
                        }
                    })
                },
                // 房型设施请求
                queryHouseCheckList(){
                    let that = this;
                    $.ajax({
                        url: queryHouseCheckListURL,
                        type: 'POST',
                        dataType: 'json',
                        success(res){
                            // console.log(res);
                            if(res.code == 200){
                                that.addHouseCheckList = res.data;
                            }
                        }
                    })
                },
                // 添加房型请求(除图片)请求
                setAddhouseTypeInfo(){
                    let that = this;
                    $.ajax({
                        url: setAddhouseTypeInfoURL,
                        data: {
                            name:this.addHouseTypeName,
                            size:this.addHouseTypeSize,
                            several_rooms:this.addHouseSeveral_rooms,
                            bed_info:this.addHouseBed_info,
                            number:this.addHouseNumber,
                            window:this.addHouseWindow,
                            breakfast:this.addHousebreakfast,
                            wc:this.addHouseWc,
                            volume:this.addHouseVolume,
                            room_facilities:this.addHouseRoom_facilities,
                            infrastructure:this.addHouseInfrastructure,
                            communication:this.addHouseCommunication,
                            bathroom:this.addHouseBathroom,
                            food:this.addHouseFood,
                            housing_details:this.addHouseTestera,
                            extra_bed:this.addHouseExtra_bed,
                            extra_bed_money:this.addHouseExtra_bed_money,
                            is_cook:this.addHouseIs_cook,
                            go_time:this.addHouseGo_time,
                            out_time:this.addHouseOut_time,
                            reception_start_time:this.addHouseStartTime,
                            reception_end_time:this.addHouseEndTime,
                            invoice:this.addHouseInvoice,
                            deposit:this.addHouseDeposit,
                            housing_code: this.addHouseHousing_code,
                            homestay_id: this.currentHomeStayID
                        },
                        type: 'POST',
                        dataType: 'json',
                        success(res){
                            if(res.code == 200){
                                // that.HouseTypeList();
                                that.setAddHouseTypeImg(res.data);
                                // that.successTip(res.msg);
                            } else {
                                that.failTip(res.msg);
                            }
                        }
                    })
                },
                // 添加房型图片请求
                setAddHouseTypeImg(id){
                    let fd = new FormData();
                    for(let i = 0; i < this.addHouseList.length; i++){
                        fd.append("files[]", this.addHouseList[i].raw);
                    }
                    fd.append('id', id);
                    fd.append('flag', this.homeImgNum);
                    let that = this;
                    $.ajax({
                        url: setAddHouseTypeImgURL,
                        type: 'POST',
                        data: fd,
                        processData:false,
                        contentType:false, 
                        success(res){
                            // console.log(res);
                            if(res.code == 200){
                                that.HouseTypeList();
                            }
                        }
                    })
                },
                // 删除房型请求
                setDeleHouseType(){
                    console.log(this.deleHouseID);
                    let that = this;
                    $.ajax({
                        url: setDeleHouseTypeUrl,
                        data: {
                            id: this.deleHouseID
                        },
                        dataType: 'json',
                        type: 'POST',
                        success(res){
                            if(res.code == 200){
                                that.HouseTypeList();
                            } else {
                                that.failTip(res.msg);
                            }
                        }
                    })
                },
                // 房型详情请求
                queryHouseTypeAll(){
                    let that = this;
                    $.ajax({
                        url: queryHouseTypeAllURL,
                        data: {
                            id:this.deleHouseID
                        },
                        type: 'POST',
                        dataType: 'json',
                        success(res){
                            if (res.code == 200) {
                                console.log(res);
                                that.resiveHouseInfoData = res.data.data;
                                that.addHouseTypeName = res.data.data.name;
                                that.addHouseTypeSize = res.data.data.size;
                                that.addHouseSeveral_rooms = res.data.data.several_rooms;
                                that.addHouseBed_info = res.data.data.bed_info;
                                that.addHouseNumber = res.data.data.number;
                                that.addHouseWindow = res.data.data.window;
                                that.addHousebreakfast = res.data.data.breakfast;
                                that.addHouseWc = res.data.data.wc;
                                that.addHouseVolume = res.data.data.volume;
                                let tempCheckArr = res.data.data.room_facilities.concat(res.data.data.infrastructure,res.data.data.communication,res.data.data.bathroom,res.data.data.food);
                                that.addHouseCheckList = res.data.title;
                                for (let i = 0; i < res.data.title.length; i++) {
                                    for (let j = 0; j < res.data.title[i].content.length; j++) {
                                        for (let m = 0; m < tempCheckArr.length; m++) {
                                            if (res.data.title[i].content[j].id == tempCheckArr[m] * 1) {
                                                tempCheckArr[m] = res.data.title[i].content[j].name;
                                            }
                                        }
                                    }
                                }
                                that.addHouseInfoList = tempCheckArr;
                                that.addHouseRoom_facilities = res.data.data.room_facilities;
                                that.addHouseInfrastructure = res.data.data.infrastructure;
                                that.addHouseCommunication = res.data.data.communication;
                                that.addHouseBathroom = res.data.data.bathroom;
                                that.addHouseFood = res.data.data.food;

                                that.addHouseTestera = res.data.data.housing_details;
                                that.addHouseExtra_bed = res.data.data.extra_bed;
                                that.addHouseExtra_bed_money = res.data.data.extra_bed_money;
                                
                                for(let i = 0; i < res.data.data.img.length; i++){
                                    if(res.data.data.img[i].is_main == 1){
                                        let tempObj = {};
                                        tempObj = res.data.data.img[i];
                                        res.data.data.img[i] = res.data.data.img[0];
                                        res.data.data.img[0] = tempObj;
                                    }
                                }
                                let tempImgArr = [];
                                for(let i = 0; i < res.data.data.img.length; i++){
                                    let tempObj = {
                                        name: '',
                                        url: ''
                                    }
                                    tempObj.name = res.data.data.img[i].img_id.toString();;
                                    tempObj.url = res.data.data.img[i].img_url;
                                    tempImgArr.push(tempObj);
                                }

                                that.addHouseList = tempImgArr;
                                that.mounteImgArr = tempImgArr;
                                that.addHouseIs_cook = res.data.data.is_cook;
                                that.addHouseGo_time = res.data.data.go_time;
                                that.addHouseGo_timeText = res.data.data.go_time;
                                that.addHouseOut_time = res.data.data.out_time;
                                that.addHouseOut_timeText = res.data.data.out_time;
                                that.addHouseStartTime = res.data.data.reception_start_time;
                                that.addHouseEndTime = res.data.data.reception_end_time;
                                that.addHouseInvoice = res.data.data.invoice;
                                if(res.data.data.deposit*1 != 0){
                                    that.addHouseDeposit_money = res.data.data.deposit;
                                }
                                that.addHouseDeposit = res.data.data.deposit;
                                let tempaddHouseHousing_code = res.data.data.housing_code.split(',');
                                for(let i = 0; i < tempaddHouseHousing_code.length; i++){
                                    if(tempaddHouseHousing_code[i]*1 == 1){
                                        tempaddHouseHousing_code[i] = '接待儿童';
                                    } else if(tempaddHouseHousing_code[i]*1 == 2) {
                                        tempaddHouseHousing_code[i] = '接待老人';
                                    } else if(tempaddHouseHousing_code[i]*1 == 3) {
                                        tempaddHouseHousing_code[i] = '抽烟';
                                    } else if(tempaddHouseHousing_code[i]*1 == 4) {
                                        tempaddHouseHousing_code[i] = '带宠物';
                                    } else if(tempaddHouseHousing_code[i]*1 == 5) {
                                        tempaddHouseHousing_code[i] = '商业拍摄';
                                    } else if(tempaddHouseHousing_code[i]*1 == 6) {
                                        tempaddHouseHousing_code[i] = '聚会';
                                    } else if(tempaddHouseHousing_code[i]*1 == 7) {
                                        tempaddHouseHousing_code[i] = '额外加人';
                                    } else if(tempaddHouseHousing_code[i]*1 == 8) {
                                        tempaddHouseHousing_code[i] = '接待外宾';
                                    }
                                }
                                that.addHouseHousing_code = tempaddHouseHousing_code;
                                that.addBoxShow = true;
                            } else {
                                that.failTip(res.msg);
                            }
                        }
                    })
                },
                // 详情设为主图请求
                setReviseHouseTypeIsMainImg(){
                    let img_id = this.mounteImgArr[this.homeImgNum].name;
                    console.log(this.deleHouseID)
                    let that = this;
                    $.ajax({
                        url: setReviseHouseTypeIsMainImgURL,
                        type: 'POST',
                        data:{
                            img_id,
                            house_id: this.deleHouseID
                        },
                        dataType: 'json',
                        success(res){
                            if(res.code == 200){
                                that.homeImgNum = 0;
                                that.queryHouseTypeAll();
                            }
                        }
                    })
                },
                // 修改房型请求
                setReviseHouseTypeInfo(){
                    let that = this;
                    for(let i = 0; i < this.addHouseHousing_code.length; i++){
                        if(this.addHouseHousing_code[i] == '接待儿童'){
                            this.addHouseHousing_code[i] = 1;
                        } else if(this.addHouseHousing_code[i] == '接待老人'){
                            this.addHouseHousing_code[i] = 2;
                        } else if(this.addHouseHousing_code[i] == '抽烟'){
                            this.addHouseHousing_code[i] = 3;
                        } else if(this.addHouseHousing_code[i] == '带宠物'){
                            this.addHouseHousing_code[i] = 4;
                        } else if(this.addHouseHousing_code[i] == '商业拍摄'){
                            this.addHouseHousing_code[i] = 5;
                        } else if(this.addHouseHousing_code[i] == '聚会'){
                            this.addHouseHousing_code[i] = 6;
                        } else if(this.addHouseHousing_code[i] == '额外加人'){
                            this.addHouseHousing_code[i] = 7;
                        } else if(this.addHouseHousing_code[i] == '接待外宾'){
                            this.addHouseHousing_code[i] = 8;
                        }
                    }
                    if(this.addHouseGo_time == 2){
                        this.addHouseGo_time = this.addHouseGo_timeText;
                    }
                    if(this.addHouseOut_time == 2){
                        this.addHouseOut_time = this.addHouseOut_timeText;
                    }
                    if(this.addHouseDeposit == 2){
                        this.addHouseDeposit = this.addHouseDeposit_money;
                    }
                    $.ajax({
                        url: setReviseHouseTypeInfoURL,
                        data:{
                            id: this.deleHouseID,
                            name:this.addHouseTypeName,
                            size:this.addHouseTypeSize,
                            several_rooms:this.addHouseSeveral_rooms,
                            bed_info:this.addHouseBed_info,
                            number:this.addHouseNumber,
                            window:this.addHouseWindow,
                            breakfast:this.addHousebreakfast,
                            wc:this.addHouseWc,
                            volume:this.addHouseVolume,
                            room_facilities:this.addHouseRoom_facilities,
                            infrastructure:this.addHouseInfrastructure,
                            communication:this.addHouseCommunication,
                            bathroom:this.addHouseBathroom,
                            food:this.addHouseFood,
                            housing_details:this.addHouseTestera,
                            extra_bed:this.addHouseExtra_bed,
                            extra_bed_money:this.addHouseExtra_bed_money,
                            is_cook:this.addHouseIs_cook,
                            go_time:this.addHouseGo_time,
                            out_time:this.addHouseOut_time,
                            reception_start_time:this.addHouseStartTime,
                            reception_end_time:this.addHouseEndTime,
                            invoice:this.addHouseInvoice,
                            deposit:this.addHouseDeposit,
                            housing_code: this.addHouseHousing_code,
                            homestay_id: this.currentHomeStayID
                        },
                        type: 'POST',
                        dataType: 'json',
                        success(res){
                            if(res.code == 200){
                                console.log(res);
                                this.addBoxShow = false;
                                this.HouseTypeList();
                            }
                            
                        }
                    })
                },


                // 房态弹出框
                reviseStateFrameClick() {
                    this.reviseStateFrame = !this.reviseStateFrame;
                },
                closeReviseStateClick() {
                    this.reviseStateFrame = false;
                },
                // 房量弹出框
                reviseNumFrameClick() {
                    this.reviseNumFrame = !this.reviseNumFrame
                },
                closeReviseNumClick() {
                    this.reviseNumFrame = false;
                },

                // roomStateOpen() {
                //     this.reviseStateFrame = false;
                // },
                // roomNumOpen() {
                //     this.reviseNumFrame = false;
                // },
                // roomStateClose() {
                //     this.reviseStateFrame = false;
                // },
                // roomNumClose() {
                //     this.reviseNumFrame = false;
                // },
                

                // 成功tip
                successTip(msg) {
                    this.$message({
                        message: `${msg}`,
                        type: 'success'
                    });
                },
                // 失败tip
                failTip(msg) {
                    this.$message({
                        message: `${msg}`,
                        type: 'warning'
                    });
                },

                
            },
            watch: {
                addBoxShow(){
                    if(this.addBoxShow == false || this.currentAddbox == true){
                        this.addHouseTypeName = '';
                        this.addHouseTypeSize = '';
                        this.addHouseSeveral_rooms = '';
                        this.addHouseBed_info = [
                            {
                                name: '',
                                size: ''
                            }
                        ];
                        this.addHouseNumber = '';
                        this.addHouseWindow = '';
                        this.addHousebreakfast = '';
                        this.addHouseWc = '';
                        this.addHouseVolume = '';
                        this.addHouseInfoList = [];
                        this.addHouseRoom_facilities = [];
                        this.addHouseInfrastructure = [];
                        this.addHouseCommunication = [];
                        this.addHouseBathroom = [];
                        this.addHouseFood = [];
                        this.addHouseTestera = '';
                        this.addHouseExtra_bed = '';
                        this.addHouseExtra_bed_money = '';
                        this.addHouseList = [];
                        this.addHouseIs_cook = '';
                        this.addHouseGo_time = '';
                        this.addHouseGo_timeText = '';
                        this.addHouseOut_time = '';
                        this.addHouseOut_timeText = '';
                        this.addHouseStartTime = '';
                        this.addHouseEndTime = '';
                        this.addHouseInvoice = '';
                        this.addHouseDeposit = '';
                        this.addHouseHousing_code = [];
                    }
                    
                },
                houseName(){
                    if(this.houseName == ''){
                        this.HouseTypeList();
                    } else {
                        this.houseTypeNameSreach();
                    }
                },
                addHouseTypeSize(){
                    let reg=/^[0-9]+$/; 
                    if(this.addHouseTypeSize != ''){
                        if (!reg.test(this.addHouseTypeSize)) {
                            this.addHouseTypeSize = '';
                            this.failTip("请输入数字")
                        }
                    }
                },
                addHouseVolume(){
                    let reg=/^[0-9]+$/; 
                    if(this.addHouseVolume != ''){
                        if (!reg.test(this.addHouseVolume)) {
                            this.addHouseVolume = '';
                            this.failTip("请输入数字")
                        }
                    }
                },
                addHouseDeposit_money(){
                    let reg=/^[0-9]+$/; 
                    if(this.addHouseDeposit_money != ''){
                        if (!reg.test(this.addHouseDeposit_money*1)) {
                            this.addHouseDeposit_money = '';
                            this.failTip("请输入数字")
                        }
                    }
                },
                addHouseGo_time(){
                    if(this.addHouseGo_time == '12:00'){
                        this.addHouseGo_timeText = '';
                    }
                },
                addHouseOut_time(){
                    if(this.addHouseOut_time == '12:00'){
                        this.addHouseOut_timeText = '';
                    }
                },
                addHouseDeposit(){
                    if(this.addHouseDeposit*1 == 0){
                        this.addHouseDeposit_money = '';
                        this.addHouseDeposit = '';
                    } else if(this.addHouseDeposit*1 != 0 && this.currentAddbox == false ) {
                        this.addHouseDeposit = 2;
                    }
                },
                addHouseExtra_bed(){
                    if(this.addHouseExtra_bed*1 == 1 || this.addHouseExtra_bed*1 == 2){
                        this.addHouseExtra_bed_money = '';
                    } else if(this.addHouseExtra_bed*1 != 1 && this.addHouseExtra_bed*1 != 2 && this.currentAddbox == false) {
                        this.addHouseExtra_bed = 3;
                    }
                },
                addHouseGo_timeText(){
                    if(this.addHouseGo_timeText != ''){
                        this.addHouseGo_time = 2;
                    }
                },
                addHouseOut_timeText(){
                    if(this.addHouseOut_timeText != ''){
                        this.addHouseOut_time = 2;
                    }
                },
                


            },
        })
    </script>
</body>

</html>